var nodemailer = require('nodemailer');
var sgTransport = require('../src/sendgrid-transport.js');

var options = {
    auth: {
        api_key: process.env.SENDGRID_APIKEY
    }
}

var mailer = nodemailer.createTransport(sgTransport(options));

var email = {
    to: ['Eddie Zaneski <eddiezane@sendgrid.com>'],
    cc: ['Master Taco <eddiezane@gmail.com>'],
    from: 'taco@cat.limo',
    subject: 'Hi there',
    text: 'Awesome sauce',
    html: '<b>Awesome sauce</b>',
    replyTo: 'master@bar.com',
    attachments: [
      {
        filename: 'test.txt',
        path: __dirname + '/test.txt'
      }
    ]
};

mailer.sendMail(email, function(err, res) {
    if (err) { 
        console.log(err) 
    }
    console.log(res);
});
