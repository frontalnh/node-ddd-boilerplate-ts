{"version":3,"sources":["../../src/validation/ValidationError.ts"],"names":[],"mappings":";;AAAA;;GAEG;AACH;IAAA;IAuEA,CAAC;IA9BG;;;;;OAKG;IACH,kCAAQ,GAAR,UAAS,cAA+B,EAAE,SAA0B,EAAE,UAAuB;QAA7F,iBAuBC;QAvBQ,+BAAA,EAAA,sBAA+B;QAAE,0BAAA,EAAA,iBAA0B;QAAE,2BAAA,EAAA,eAAuB;QACzF,IAAM,SAAS,GAAG,cAAc,CAAC,CAAC,CAAC,WAAS,CAAC,CAAC,CAAC,EAAE,CAAC;QAClD,IAAM,OAAO,GAAG,cAAc,CAAC,CAAC,CAAC,YAAU,CAAC,CAAC,CAAC,EAAE,CAAC;QACjD,IAAM,oBAAoB,GAAG,UAAC,YAAoB,IAAa,OAAA,iBAAe,SAAS,GAAG,UAAU,GAAG,YAAY,GAAG,OAAO,+CAA0C,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,OAAO,QAAK,EAA3K,CAA2K,CAAC;QAE3O,IAAI,CAAC,SAAS,EAAE;YACZ,OAAO,oBAAkB,SAAS,IAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,WAAW,IAAG,OAAO,kCAA+B;gBAClI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC7D,IAAI,CAAC,QAAQ;qBACR,GAAG,CAAC,UAAA,UAAU,IAAI,OAAA,UAAU,CAAC,QAAQ,CAAC,cAAc,EAAE,IAAI,EAAE,KAAI,CAAC,QAAQ,CAAC,EAAxD,CAAwD,CAAC;qBAC3E,IAAI,CAAC,EAAE,CAAC,CAAC;SACrB;aAAM;YACH,6DAA6D;YAC7D,IAAM,mBAAiB,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAI,IAAI,CAAC,QAAQ,MAAG,CAAC,CAAC,CAAC,MAAG,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAG,IAAI,CAAC,QAAU,CAAC;YAE/H,IAAI,IAAI,CAAC,WAAW,EAAE;gBAClB,OAAO,oBAAoB,CAAC,mBAAiB,CAAC,CAAC;aAClD;iBAAM;gBACH,OAAO,IAAI,CAAC,QAAQ;qBACf,GAAG,CAAC,UAAA,UAAU,IAAI,OAAA,UAAU,CAAC,QAAQ,CAAC,cAAc,EAAE,IAAI,EAAE,KAAG,UAAU,GAAG,mBAAmB,CAAG,EAAhF,CAAgF,CAAC;qBACnG,IAAI,CAAC,EAAE,CAAC,CAAC;aACjB;SACJ;IACL,CAAC;IACL,sBAAC;AAAD,CAvEA,AAuEC,IAAA;AAvEY,0CAAe","file":"ValidationError.js","sourcesContent":["/**\r\n * Validation error description.\r\n */\r\nexport class ValidationError {\r\n\r\n    /**\r\n     * Object that was validated.\r\n     *\r\n     * OPTIONAL - configurable via the ValidatorOptions.validationError.target option\r\n     */\r\n    target?: Object;\r\n\r\n    /**\r\n     * Object's property that haven't pass validation.\r\n     */\r\n    property: string;\r\n\r\n    /**\r\n     * Value that haven't pass a validation.\r\n     *\r\n     * OPTIONAL - configurable via the ValidatorOptions.validationError.value option\r\n     */\r\n    value?: any;\r\n\r\n    /**\r\n     * Constraints that failed validation with error messages.\r\n     */\r\n    constraints: {\r\n        [type: string]: string\r\n    };\r\n\r\n    /**\r\n     * Contains all nested validation errors of the property.\r\n     */\r\n    children: ValidationError[];\r\n\r\n\r\n    /*\r\n     * A transient set of data passed through to the validation result for response mapping\r\n     */\r\n    contexts?: {\r\n        [type: string]: any\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param shouldDecorate decorate the message with ANSI formatter escape codes for better readability\r\n     * @param hasParent true when the error is a child of an another one\r\n     * @param parentPath path as string to the parent of this property\r\n     */\r\n    toString(shouldDecorate: boolean = false, hasParent: boolean = false, parentPath: string = ``): string {\r\n        const boldStart = shouldDecorate ? `\\x1b[1m` : ``;\r\n        const boldEnd = shouldDecorate ? `\\x1b[22m` : ``;\r\n        const propConstraintFailed = (propertyName: string): string => ` - property ${boldStart}${parentPath}${propertyName}${boldEnd} has failed the following constraints: ${boldStart}${Object.keys(this.constraints).join(`, `)}${boldEnd} \\n`;\r\n\r\n        if (!hasParent) {\r\n            return `An instance of ${boldStart}${this.target ? this.target.constructor.name : \"an object\"}${boldEnd} has failed the validation:\\n` +\r\n                (this.constraints ? propConstraintFailed(this.property) : ``) +\r\n                this.children\r\n                    .map(childError => childError.toString(shouldDecorate, true, this.property))\r\n                    .join(``);\r\n        } else {\r\n            // we format numbers as array indexes for better readability.\r\n            const formattedProperty = Number.isInteger(+this.property) ? `[${this.property}]` : `${parentPath ? `.` : ``}${this.property}`;\r\n\r\n            if (this.constraints) {\r\n                return propConstraintFailed(formattedProperty);\r\n            } else {\r\n                return this.children\r\n                    .map(childError => childError.toString(shouldDecorate, true, `${parentPath}${formattedProperty}`, ))\r\n                    .join(``);\r\n            }\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":".."}