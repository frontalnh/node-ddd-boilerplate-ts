{"version":3,"file":"https.js","sourceRoot":"","sources":["../../src/transports/https.ts"],"names":[],"mappings":";;;AAAA,qCAA2C;AAE3C,6BAA+B;AAC/B,mDAAqD;AACrD,+BAAuC;AAEvC,kCAAkC;AAClC;IAAoC,0CAAa;IAC/C,+CAA+C;IAC/C,wBAA0B,OAAyB;QAAnD,YACE,kBAAM,OAAO,CAAC,SAOf;QARyB,aAAO,GAAP,OAAO,CAAkB;QAEjD,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAM,KAAK,GAAG,OAAO,CAAC,UAAU,IAAI,OAAO,CAAC,SAAS,IAAI,OAAO,CAAC,GAAG,CAAC,WAAW,IAAI,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC;QAC3G,KAAI,CAAC,MAAM,GAAG,KAAK;YACjB,CAAC,CAAC,yCAAyC;gBACxC,IAAI,eAAe,CAAC,KAAK,CAAiB;YAC7C,CAAC,CAAC,IAAI,KAAK,CAAC,KAAK,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,EAAE,CAAC,CAAC;;IAC5D,CAAC;IAED;;OAEG;IACU,qCAAY,GAAzB,UAA0B,KAAkB;;;gBAC1C,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;oBAChB,MAAM,IAAI,kBAAW,CAAC,uCAAuC,CAAC,CAAC;iBAChE;gBAED,sBAAO,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,EAAC;;;KAChD;IACH,qBAAC;AAAD,CAAC,AAtBD,CAAoC,oBAAa,GAsBhD;AAtBY,wCAAc","sourcesContent":["import { SentryError } from '@sentry/core';\nimport { SentryEvent, SentryResponse, TransportOptions } from '@sentry/types';\nimport * as https from 'https';\nimport * as HttpsProxyAgent from 'https-proxy-agent';\nimport { BaseTransport } from './base';\n\n/** Node https module transport */\nexport class HTTPSTransport extends BaseTransport {\n  /** Create a new instance and set this.agent */\n  public constructor(public options: TransportOptions) {\n    super(options);\n    this.module = https;\n    const proxy = options.httpsProxy || options.httpProxy || process.env.https_proxy || process.env.http_proxy;\n    this.client = proxy\n      ? // tslint:disable-next-line:no-unsafe-any\n        (new HttpsProxyAgent(proxy) as https.Agent)\n      : new https.Agent({ keepAlive: true, maxSockets: 100 });\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public async captureEvent(event: SentryEvent): Promise<SentryResponse> {\n    if (!this.module) {\n      throw new SentryError('No module available in HTTPSTransport');\n    }\n\n    return this.sendWithModule(this.module, event);\n  }\n}\n"]}